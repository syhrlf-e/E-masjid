
   PASS  Tests\Unit\ExampleTest
  ✓ that true is true                                                                                                                                                                                                                        0.01s  

   FAIL  Tests\Unit\TransactionAmountValidationTest
  ⨯ amount validation                                                                                                                                                                                                                        0.28s  

   PASS  Tests\Unit\ZakatCalculatorTest
  ✓ hitung zakat maal
  ✓ hitung zakat fitrah
  ✓ cek nishab

   PASS  Tests\Feature\Auth\AuthenticationTest
  ✓ login screen can be rendered                                                                                                                                                                                                             0.25s  
  ✓ users can authenticate using the login screen                                                                                                                                                                                            0.08s  
  ✓ users can not authenticate with invalid password                                                                                                                                                                                         0.24s  
  ✓ users can logout                                                                                                                                                                                                                         0.02s  

   PASS  Tests\Feature\Auth\EmailVerificationTest
  ✓ email verification screen can be rendered                                                                                                                                                                                                0.03s  
  ✓ email can be verified                                                                                                                                                                                                                    0.03s  
  ✓ email is not verified with invalid hash                                                                                                                                                                                                  0.03s  

   PASS  Tests\Feature\Auth\PasswordConfirmationTest
  ✓ confirm password screen can be rendered                                                                                                                                                                                                  0.03s  
  ✓ password can be confirmed                                                                                                                                                                                                                0.02s  
  ✓ password is not confirmed with invalid password                                                                                                                                                                                          0.24s  

   PASS  Tests\Feature\Auth\PasswordResetTest
  ✓ reset password link screen can be rendered                                                                                                                                                                                               0.03s  
  ✓ reset password link can be requested                                                                                                                                                                                                     0.24s  
  ✓ reset password screen can be rendered                                                                                                                                                                                                    0.24s  
  ✓ password can be reset with valid token                                                                                                                                                                                                   0.24s  

   PASS  Tests\Feature\Auth\PasswordUpdateTest
  ✓ password can be updated                                                                                                                                                                                                                  0.03s  
  ✓ correct password must be provided to update password                                                                                                                                                                                     0.02s  

   PASS  Tests\Feature\Auth\RegistrationTest
  ✓ registration screen can be rendered                                                                                                                                                                                                      0.02s  
  ✓ new users can register                                                                                                                                                                                                                   0.02s  

   PASS  Tests\Feature\ExampleTest
  ✓ the application returns a successful response                                                                                                                                                                                            0.02s  

   FAIL  Tests\Feature\ProfileTest
  ⨯ profile page is displayed                                                                                                                                                                                                                0.03s  
  ⨯ profile information can be updated                                                                                                                                                                                                       0.02s  
  ⨯ email verification status is unchanged when the email address is unchanged                                                                                                                                                               0.02s  
  ⨯ user can delete their account                                                                                                                                                                                                            0.02s  
  ⨯ correct password must be provided to delete account                                                                                                                                                                                      0.02s  

   PASS  Tests\Feature\Transaction\TransactionTest
  ✓ bendahara can create valid transaction                                                                                                                                                                                                   0.05s  
  ✓ transaction amount zero rejected                                                                                                                                                                                                         0.02s  
  ✓ petugas cannot create out transaction                                                                                                                                                                                                    0.02s  

   FAIL  Tests\Feature\Tromol\TromolQrTest
  ⨯ signed url valid can be accessed                                                                                                                                                                                                         0.03s  
  ⨯ unsigned url rejected                                                                                                                                                                                                                    0.02s  
  ⨯ inactive tromol rejected                                                                                                                                                                                                                 0.03s  
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\TransactionAmountValidationTest > amount validation                                                                                                                                                                           
  Failed asserting that false is true.

  at tests\Unit\TransactionAmountValidationTest.php:13
      9▕     public function test_amount_validation()
     10▕     {
     11▕         $rules = (new \App\Http\Requests\StoreTransactionRequest())->rules();
     12▕         $validator = \Illuminate\Support\Facades\Validator::make(['amount' => 100000], $rules);
  ➜  13▕         $this->assertTrue($validator->passes());
     14▕ 
     15▕         $validator = \Illuminate\Support\Facades\Validator::make(['amount' => 'abc'], $rules);
     16▕         $this->assertFalse($validator->passes());
     17▕

  1   tests\Unit\TransactionAmountValidationTest.php:13

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\ProfileTest > profile page is displayed                                                                                                                                                                                    
  Expected response status code [200] but received 404.
Failed asserting that 404 is identical to 200.

  at tests\Feature\ProfileTest.php:21
     17▕         $response = $this
     18▕             ->actingAs($user)
     19▕             ->get('/profile');
     20▕ 
  ➜  21▕         $response->assertOk();
     22▕     }
     23▕ 
     24▕     public function test_profile_information_can_be_updated(): void
     25▕     {

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\ProfileTest > profile information can be updated                                                                                                                                                                           
  Expected response status code [201, 301, 302, 303, 307, 308] but received 404.
Failed asserting that false is true.

  at tests\Feature\ProfileTest.php:37
     33▕             ]);
     34▕ 
     35▕         $response
     36▕             ->assertSessionHasNoErrors()
  ➜  37▕             ->assertRedirect('/profile');
     38▕ 
     39▕         $user->refresh();
     40▕ 
     41▕         $this->assertSame('Test User', $user->name);

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\ProfileTest > email verification status is unchanged when the email address is unchanged                                                                                                                                   
  Expected response status code [201, 301, 302, 303, 307, 308] but received 404.
Failed asserting that false is true.

  at tests\Feature\ProfileTest.php:59
     55▕             ]);
     56▕ 
     57▕         $response
     58▕             ->assertSessionHasNoErrors()
  ➜  59▕             ->assertRedirect('/profile');
     60▕ 
     61▕         $this->assertNotNull($user->refresh()->email_verified_at);
     62▕     }
     63▕

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\ProfileTest > user can delete their account                                                                                                                                                                                
  Expected response status code [201, 301, 302, 303, 307, 308] but received 404.
Failed asserting that false is true.

  at tests\Feature\ProfileTest.php:76
     72▕             ]);
     73▕ 
     74▕         $response
     75▕             ->assertSessionHasNoErrors()
  ➜  76▕             ->assertRedirect('/');
     77▕ 
     78▕         $this->assertGuest();
     79▕         $this->assertNull($user->fresh());
     80▕     }

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\ProfileTest > correct password must be provided to delete account                                                                                                                                                          
  Session is missing expected key [errors].
Failed asserting that false is true.

  at tests\Feature\ProfileTest.php:94
     90▕                 'password' => 'wrong-password',
     91▕             ]);
     92▕ 
     93▕         $response
  ➜  94▕             ->assertSessionHasErrors('password')
     95▕             ->assertRedirect('/profile');
     96▕ 
     97▕         $this->assertNotNull($user->fresh());
     98▕     }

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\Tromol\TromolQrTest > signed url valid can be accessed                                                                                                                                                                     
  Expected response status code [200] but received 302.
Failed asserting that 302 is identical to 200.

The following errors occurred during the last request:

Your account is inactive. Please contact support.

  at tests\Feature\Tromol\TromolQrTest.php:22
     18▕         $url = \Illuminate\Support\Facades\URL::signedRoute('tromol.input', ['tromolBox' => $tromol->id]);
     19▕ 
     20▕         $response = $this->actingAs($user)->get($url);
     21▕ 
  ➜  22▕         $response->assertStatus(200);
     23▕         $response->assertInertia(fn ($page) => $page->component('Tromol/Input'));
     24▕     }
     25▕ 
     26▕     public function test_unsigned_url_rejected()

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\Tromol\TromolQrTest > unsigned url rejected                                                                                                                                                                                
  Expected response status code [403] but received 302.
Failed asserting that 302 is identical to 403.

The following errors occurred during the last request:

Your account is inactive. Please contact support.

  at tests\Feature\Tromol\TromolQrTest.php:35
     31▕         $url = route('tromol.input', ['tromolBox' => $tromol->id]); // Not signed
     32▕ 
     33▕         $response = $this->actingAs($user)->get($url);
     34▕ 
  ➜  35▕         $response->assertStatus(403);
     36▕     }
     37▕ 
     38▕     public function test_inactive_tromol_rejected()
     39▕     {

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\Tromol\TromolQrTest > inactive tromol rejected                                                                                                                                                                             
  Expected response status code [403] but received 302.
Failed asserting that 302 is identical to 403.

The following errors occurred during the last request:

Your account is inactive. Please contact support.

  at tests\Feature\Tromol\TromolQrTest.php:47
     43▕         $url = \Illuminate\Support\Facades\URL::signedRoute('tromol.input', ['tromolBox' => $tromol->id]);
     44▕ 
     45▕         $response = $this->actingAs($user)->get($url);
     46▕ 
  ➜  47▕         $response->assertStatus(403);
     48▕     }
     49▕ }
     50▕


  Tests:    9 failed, 26 passed (70 assertions)
  Duration: 2.73s

